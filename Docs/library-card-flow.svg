<?xml version="1.0" encoding="UTF-8" standalone="yes"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="1533px" style="width:973px;height:1533px;" version="1.1" viewBox="0 0 973 1533" width="973px"><defs><filter height="300%" id="f1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="514" y="160.4297"/><rect fill="#FFFFFF" filter="url(#f1)" height="44.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="514" y="311.9609"/><rect fill="#FFFFFF" filter="url(#f1)" height="29.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="514" y="487.8906"/><rect fill="#FFFFFF" filter="url(#f1)" height="86.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="514" y="585.4219"/><rect fill="#FFFFFF" filter="url(#f1)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="878.5" y="517.1563"/><rect fill="#FFFFFF" filter="url(#f1)" height="144.7969" style="stroke: #000000; stroke-width: 2.0;" width="638" x="197" y="1229.6094"/><rect fill="#FFFFFF" filter="url(#f1)" height="73.1328" style="stroke: #000000; stroke-width: 2.0;" width="219" x="723" y="1442.6719"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="90" x2="90" y1="86.2969" y2="1532.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="268" x2="268" y1="86.2969" y2="1532.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="519" x2="519" y1="86.2969" y2="1532.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="779" x2="779" y1="86.2969" y2="1532.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="883" x2="883" y1="86.2969" y2="1532.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="71" y="82.9951">User</text><ellipse cx="90" cy="13" fill="#F5A3C7" filter="url(#f1)" rx="8" ry="8" style="stroke: #F5A3C7; stroke-width: 2.0;"/><path d="M90,21 L90,48 M77,29 L103,29 M90,48 L77,63 M90,48 L103,63 " fill="#F5A3C7" filter="url(#f1)" style="stroke: #F5A3C7; stroke-width: 2.0;"/><rect fill="#9FC9EB" filter="url(#f1)" height="30.2969" style="stroke: #9FC9EB; stroke-width: 1.5;" width="42" x="245" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="28" x="252" y="70.9951">App</text><rect fill="#9FC9EB" filter="url(#f1)" height="30.2969" style="stroke: #9FC9EB; stroke-width: 1.5;" width="98" x="468" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="475" y="70.9951">Tunnistamo</text><rect fill="#9FC9EB" filter="url(#f1)" height="46.5938" style="stroke: #9FC9EB; stroke-width: 1.5;" width="88" x="733" y="34.7031"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="74" x="740" y="54.6982">Self-check</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="48" x="753" y="70.9951">station</text><rect fill="#9FC9EB" filter="url(#f1)" height="62.8906" style="stroke: #9FC9EB; stroke-width: 1.5;" width="93" x="835" y="18.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="79" x="842" y="38.4014">Automated</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="75" x="844" y="54.6982">circulation</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="50" x="856.5" y="70.9951">system</text><rect fill="#FFFFFF" filter="url(#f1)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="514" y="160.4297"/><rect fill="#FFFFFF" filter="url(#f1)" height="44.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="514" y="311.9609"/><rect fill="#FFFFFF" filter="url(#f1)" height="29.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="514" y="487.8906"/><rect fill="#FFFFFF" filter="url(#f1)" height="86.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="514" y="585.4219"/><rect fill="#FFFFFF" filter="url(#f1)" height="68.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="878.5" y="517.1563"/><rect fill="#EEEEEE" filter="url(#f1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="965" x="3" y="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="968" y1="116.8633" y2="116.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="968" y1="119.8633" y2="119.8633"/><rect fill="#EEEEEE" filter="url(#f1)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="58" x="456.5" y="106.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="462.5" y="122.3638">Login</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="512" x2="502" y1="160.4297" y2="156.4297"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="512" x2="502" y1="160.4297" y2="164.4297"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="513" y1="160.4297" y2="160.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="155.4966">[001]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="35" x="318" y="155.4966">Login</text><polygon fill="#FFE977" filter="url(#f1)" points="449,173.5625,449,198.5625,585,198.5625,585,183.5625,575,173.5625,449,173.5625" style="stroke: #FFE977; stroke-width: 1.0;"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="575" x2="575" y1="173.5625" y2="183.5625"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="585" x2="575" y1="183.5625" y2="183.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="115" x="455" y="190.6294">Authenticate user</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="228.6953" y2="224.6953"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="228.6953" y2="232.6953"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="518" y1="228.6953" y2="228.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="285" y="223.7622">[002]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="328" y="223.7622">Access token</text><polygon fill="#FFE977" filter="url(#f1)" points="165,241.8281,165,266.8281,367,266.8281,367,251.8281,357,241.8281,165,241.8281" style="stroke: #FFE977; stroke-width: 1.0;"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="357" x2="357" y1="241.8281" y2="251.8281"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="367" x2="357" y1="251.8281" y2="251.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="171" y="258.895">Generate a new EC key pair</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="512" x2="502" y1="311.9609" y2="307.9609"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="512" x2="502" y1="311.9609" y2="315.9609"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="513" y1="311.9609" y2="311.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="299.5942">[003]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="318" y="292.0278">Register new device</text><text fill="#000000" font-family="monospaced" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="318" y="307.1606">POST /v1/user_device/</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="356.2266" y2="352.2266"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="356.2266" y2="360.2266"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="518" y1="356.2266" y2="356.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="285" y="343.8599">[004]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="328" y="336.2935">OK</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="148" x="328" y="351.4263">secret key + device ID</text><rect fill="#EEEEEE" filter="url(#f1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="965" x="3" y="385.0586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="968" y1="385.0586" y2="385.0586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="968" y1="388.0586" y2="388.0586"/><rect fill="#EEEEEE" filter="url(#f1)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="168" x="401.5" y="374.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="149" x="407.5" y="390.5591">Register library card</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="266" x2="256" y1="443.625" y2="439.625"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="266" x2="256" y1="443.625" y2="447.625"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="90" x2="267" y1="443.625" y2="443.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="97" y="431.2583">[100]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="140" y="423.6919">Input library card</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="91" x="140" y="438.8247">number + PIN</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="512" x2="502" y1="487.8906" y2="483.8906"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="512" x2="502" y1="487.8906" y2="491.8906"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="513" y1="487.8906" y2="487.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="475.5239">[101]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="318" y="467.9575">Create new identity</text><text fill="#000000" font-family="monospaced" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="318" y="483.0903">POST /v1/user_identity/</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="876.5" x2="866.5" y1="517.1563" y2="513.1563"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="876.5" x2="866.5" y1="517.1563" y2="521.1563"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="519" x2="877.5" y1="517.1563" y2="517.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="526" y="512.2231">[102]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="569" y="512.2231">Validate patron</text><polygon fill="#FFE977" filter="url(#f1)" points="803,530.2891,803,555.2891,959,555.2891,959,540.2891,949,530.2891,803,530.2891" style="stroke: #FFE977; stroke-width: 1.0;"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="949" x2="949" y1="530.2891" y2="540.2891"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="959" x2="949" y1="540.2891" y2="540.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="809" y="547.356">Check number + PIN</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="524" x2="534" y1="585.4219" y2="581.4219"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="524" x2="534" y1="585.4219" y2="589.4219"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="524" x2="882.5" y1="585.4219" y2="585.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="541" y="580.4888">[103]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="584" y="580.4888">OK</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="524" x2="566" y1="629.8203" y2="629.8203"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="566" x2="566" y1="629.8203" y2="642.8203"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="525" x2="566" y1="642.8203" y2="642.8203"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="525" x2="535" y1="642.8203" y2="638.8203"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="525" x2="535" y1="642.8203" y2="646.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="531" y="617.188">[104]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="86" x="574" y="609.6216">Save identity</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="100" x="574" y="624.7544">(PIN not saved)</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="671.8203" y2="667.8203"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="671.8203" y2="675.8203"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="518" y1="671.8203" y2="671.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="285" y="666.8872">[105]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="328" y="666.8872">OK</text><rect fill="#EEEEEE" filter="url(#f1)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="965" x="3" y="700.5195"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="968" y1="700.5195" y2="700.5195"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="968" y1="703.5195" y2="703.5195"/><rect fill="#EEEEEE" filter="url(#f1)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="139" x="416" y="689.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="120" x="422" y="706.02">Check out items</text><polygon fill="#FFE977" filter="url(#f1)" points="28,728.0859,28,768.0859,148,768.0859,148,738.0859,138,728.0859,28,728.0859" style="stroke: #FFE977; stroke-width: 1.0;"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="138" x2="138" y1="728.0859" y2="738.0859"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="148" x2="138" y1="738.0859" y2="738.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="99" x="34" y="745.1528">Place phone on</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="34" y="760.2856">NFC surface</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="798.3516" y2="794.3516"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="798.3516" y2="802.3516"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="798.3516" y2="798.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="285" y="793.4185">[200]</text><text fill="#000000" font-family="monospaced" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="80" x="328" y="793.4185">SELECT AID</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="827.4844" y2="823.4844"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="827.4844" y2="831.4844"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="827.4844" y2="827.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="822.5513">[201]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="318" y="822.5513">OK</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="871.6172" y2="867.6172"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="871.6172" y2="875.6172"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="871.6172" y2="871.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="285" y="859.2505">[202]</text><text fill="#000000" font-family="monospaced" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="328" y="851.6841">EXTERNAL AUTHENTICATE</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="163" x="328" y="866.8169">interface device client ID</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="900.8828" y2="896.8828"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="900.8828" y2="904.8828"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="900.8828" y2="900.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="895.9497">[203]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="318" y="895.9497">OK</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="930.0156" y2="926.0156"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="930.0156" y2="934.0156"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="930.0156" y2="930.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="285" y="925.0825">[204]</text><text fill="#000000" font-family="monospaced" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="328" y="925.0825">INTERNAL AUTHENTICATE</text><polygon fill="#FFE977" filter="url(#f1)" points="180,943.1484,180,983.1484,351,983.1484,351,953.1484,341,943.1484,180,943.1484" style="stroke: #FFE977; stroke-width: 1.0;"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="341" x2="341" y1="943.1484" y2="953.1484"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="351" x2="341" y1="953.1484" y2="953.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="186" y="960.2153">Generate JWT</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="186" y="975.3481">(encrypted and signed)</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="1013.4141" y2="1009.4141"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="1013.4141" y2="1017.4141"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="1013.4141" y2="1013.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="1008.481">[205]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="318" y="1008.481">Token (first 256 bytes)</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="1042.5469" y2="1038.5469"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="1042.5469" y2="1046.5469"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="1042.5469" y2="1042.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="285" y="1037.6138">[206]</text><text fill="#000000" font-family="monospaced" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="328" y="1037.6138">GET RESPONSE</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="1071.6797" y2="1067.6797"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="1071.6797" y2="1075.6797"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="1071.6797" y2="1071.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="1066.7466">[207]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="318" y="1066.7466">Token (next 256 bytes...)</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="519" x2="529" y1="1130.8125" y2="1126.8125"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="519" x2="529" y1="1130.8125" y2="1134.8125"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="519" x2="778" y1="1130.8125" y2="1130.8125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="536" y="1111.0122">[208]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="579" y="1095.8794">Get user identity</text><text fill="#000000" font-family="monospaced" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="579" y="1111.0122">GET /v1/user_identity/</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="193" x="579" y="1126.145">JWT + interface device secret</text><polygon fill="#FFE977" filter="url(#f1)" points="381,1144.2109,381,1169.2109,653,1169.2109,653,1154.2109,643,1144.2109,381,1144.2109" style="stroke: #FFE977; stroke-width: 1.0;"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="643" x2="643" y1="1144.2109" y2="1154.2109"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="653" x2="643" y1="1154.2109" y2="1154.2109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="387" y="1161.2778">Validate JWT + interface device secret</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="1214.3438" y2="1210.3438"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="1214.3438" y2="1218.3438"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="519" x2="778" y1="1214.3438" y2="1214.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="526" y="1201.9771">[209]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="569" y="1194.4106">OK</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="569" y="1209.5435">(+ library card number)</text><rect fill="none" height="144.7969" style="stroke: #000000; stroke-width: 2.0;" width="638" x="197" y="1229.6094"/><polygon fill="#EEEEEE" points="197,1229.6094,418,1229.6094,418,1236.6094,408,1246.6094,197,1246.6094,197,1229.6094" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="176" x="212" y="1242.6763">optional (if PIN needed)</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="1282.7422" y2="1278.7422"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="278" y1="1282.7422" y2="1286.7422"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="1282.7422" y2="1282.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="285" y="1270.3755">[210]</text><text fill="#000000" font-family="monospaced" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="328" y="1262.8091">EXTERNAL AUTHENTICATE</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="39" x="328" y="1277.9419">nonce</text><polygon fill="#FFE977" filter="url(#f1)" points="207,1296.0078,207,1321.0078,325,1321.0078,325,1306.0078,315,1296.0078,207,1296.0078" style="stroke: #FFE977; stroke-width: 1.0;"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="315" x2="315" y1="1296.0078" y2="1306.0078"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="325" x2="315" y1="1306.0078" y2="1306.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="213" y="1313.0747">Validate nonce</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="1366.1406" y2="1362.1406"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="777" x2="767" y1="1366.1406" y2="1370.1406"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="268" x2="778" y1="1366.1406" y2="1366.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="275" y="1353.7739">[211]</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="19" x="318" y="1346.2075">OK</text><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="100" x="318" y="1361.3403">library card PIN</text><polygon fill="#FFE977" filter="url(#f1)" points="8,1386.4063,8,1426.4063,169,1426.4063,169,1396.4063,159,1386.4063,8,1386.4063" style="stroke: #FFE977; stroke-width: 1.0;"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="159" x2="159" y1="1386.4063" y2="1396.4063"/><line style="stroke: #FFE977; stroke-width: 1.0;" x1="169" x2="159" y1="1396.4063" y2="1396.4063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="14" y="1403.4731">Removes phone from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="14" y="1418.606">NFC surface</text><rect fill="none" height="73.1328" style="stroke: #000000; stroke-width: 2.0;" width="219" x="723" y="1442.6719"/><polygon fill="#EEEEEE" points="723,1442.6719,801,1442.6719,801,1449.6719,791,1459.6719,723,1459.6719,723,1442.6719" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="33" x="738" y="1455.7388">SIP2</text><line style="stroke: #BD2719; stroke-width: 1.0;" x1="881.5" x2="871.5" y1="1465.8047" y2="1461.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="881.5" x2="871.5" y1="1465.8047" y2="1469.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="779" x2="882.5" y1="1465.8047" y2="1465.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="779" x2="789" y1="1479.8047" y2="1475.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="779" x2="789" y1="1479.8047" y2="1483.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="779" x2="882.5" y1="1479.8047" y2="1479.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="881.5" x2="871.5" y1="1493.8047" y2="1489.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="881.5" x2="871.5" y1="1493.8047" y2="1497.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="779" x2="882.5" y1="1493.8047" y2="1493.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="779" x2="789" y1="1507.8047" y2="1503.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="779" x2="789" y1="1507.8047" y2="1511.8047"/><line style="stroke: #BD2719; stroke-width: 1.0;" x1="779" x2="882.5" y1="1507.8047" y2="1507.8047"/></g></svg>